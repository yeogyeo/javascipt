<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>자식창</title>
		<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
		<style>
			*{margin: 0; padding: 0;}
			h1{text-align: center;}
			table{width: 500px; margin: 0 auto;}
			table,th,td{border: 1px solid black; border-collapse: collapse;
			}
			td:nth-of-type(1){text-align: center;}
			td:nth-of-type(2){text-align: left;}
			td{height: 50px;}
			button{width: 120px; height: 40px;}
			#idChk{height: 25px;}
			#txt{font-size: 20px; font-weight: 700;}
		</style>
		<script>
			var userid;
			var check=0;
			function idChkBtn(){
			userid = $("#id").val();
			if(userid=="aaa"){
				$("#txt").text("아이디를 사용중입니다. 다른 아이디를 입력하세요.");
				$("#txt").css("color","red");
				check=0;
				
			}else{
				$("#txt").text("아이디 사용이 가능합니다. 확인버튼을 클릭하세요");
				$("#txt").css("color","blue");
				check=1;
				
				}
				
			}
			
			//확인버튼 클릭 시 
			function comfirmBtn(){
				if(check == 1){
					opener.document.querySelector("#id").value = userid;
					window.close();
					
				}else {
					alert("아이디가 사용중이기에 다시 입력하셔야 합니다.");
					$("#id").val("");
					$("#id").focus();
					return false;
				}
					
			}
		
		</script>
	</head>
	<body>
		<h1>아이디 중복체크</h1>
		<table>
			<colgroup>
			<col width="100px">
			<col width="300px">
			</colgroup>
			<form action="#" method="get">
				<tr>
					<td>이름</td>
					<td id="cname"></td>
				</tr>
				<tr>
					<td>아이디</td>
					<td>
						<input type="text" name="id" id="id">
						<button type="button" id="idChk" onclick="idChkBtn()">아이디 중복체크</button>
					</td>
				</tr>
				<tr>
					<td id="txt" colspan="2"></td>
				</tr>
				<tr>
					<td colspan="2">
						<button type="button" onclick="comfirmBtn()">확인</button>
					</td>
					
				</tr>
				
			</form>
		</table>
	
	</body>
</html>